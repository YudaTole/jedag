<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Romantic Beat Website</title>
<style>
  body {
    margin: 0;
    background: black;
    overflow: hidden;
  }
  .slideshow {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .slideshow img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.2s ease, filter 0.2s ease;
  }
  .flash {
    position: fixed;
    top:0; left:0;
    width:100%;
    height:100%;
    background:white;
    opacity:0;
    pointer-events:none;
    transition: opacity 0.1s ease;
  }
  .quote {
    position: fixed;
    bottom: 10%;
    width: 100%;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    color: white;
    text-shadow: 2px 2px 5px black;
    font-family: sans-serif;
  }
  .play-button {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255,255,255,0.8);
    border-radius: 50%;
    padding: 30px;
    cursor: pointer;
    font-size: 2em;
    z-index: 10;
  }
</style>
</head>
<body>

<div class="slideshow"></div>
<div class="flash"></div>
<div class="quote"></div>
<div class="play-button">â–¶</div>

<audio id="music" src="https://www.computerhope.com/jargon/m/example.mp3"></audio>

<script>
const photos = [
  "https://picsum.photos/id/1015/1920/1080",
  "https://picsum.photos/id/1016/1920/1080",
  "https://picsum.photos/id/1018/1920/1080",
  "https://picsum.photos/id/1021/1920/1080",
  "https://picsum.photos/id/1024/1920/1080",
  "https://picsum.photos/id/1025/1920/1080",
  "https://picsum.photos/id/1035/1920/1080",
  "https://picsum.photos/id/1039/1920/1080",
  "https://picsum.photos/id/1040/1920/1080",
  "https://picsum.photos/id/1041/1920/1080"
];
const quotes = [
  "Cinta adalah kamu.",
  "Hanya kamu di hatiku.",
  "Selamanya bersamamu.",
  "Kamu adalah rumahku.",
  "Hatiku milikmu.",
  "Tak akan kulepas.",
  "Bersamamu, bahagia.",
  "Kamu adalah duniaku.",
  "Tak tergantikan.",
  "Cinta tanpa akhir."
];

let current = 0;
const slideshow = document.querySelector(".slideshow");
const flash = document.querySelector(".flash");
const quoteEl = document.querySelector(".quote");
const music = document.getElementById("music");
const playBtn = document.querySelector(".play-button");

photos.forEach(src => {
  let img = document.createElement("img");
  img.src = src;
  slideshow.appendChild(img);
});
const images = document.querySelectorAll(".slideshow img");

function showSlide(index) {
  images.forEach((img, i) => img.style.opacity = i === index ? 1 : 0);
  quoteEl.textContent = quotes[index % quotes.length];
}
showSlide(current);

playBtn.addEventListener("click", () => {
  playBtn.style.display = "none";
  music.play();
  startBeatDetection();
});

function nextSlide() {
  current = (current + 1) % photos.length;
  showSlide(current);
}
setInterval(nextSlide, 5000);

// Beat detection
function startBeatDetection() {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const src = ctx.createMediaElementSource(music);
  const analyser = ctx.createAnalyser();
  src.connect(analyser);
  analyser.connect(ctx.destination);
  analyser.fftSize = 256;
  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);

  let lastBeat = 0;
  function detectBeat() {
    requestAnimationFrame(detectBeat);
    analyser.getByteFrequencyData(dataArray);
    let sum = 0;
    for (let i = 0; i < bufferLength; i++) sum += dataArray[i];
    let avg = sum / bufferLength;

    const now = Date.now();
    if (avg > 160 && now - lastBeat > 250) {
      lastBeat = now;
      triggerBeatEffect();
    }
  }
  detectBeat();
}

function triggerBeatEffect() {
  const img = images[current];
  img.style.transform = "scale(1.05)";
  img.style.filter = "brightness(1.2)";
  flash.style.opacity = 0.5;
  setTimeout(() => {
    img.style.transform = "scale(1)";
    img.style.filter = "brightness(1)";
    flash.style.opacity = 0;
  }, 150);
}
</script>
</body>
</html>
